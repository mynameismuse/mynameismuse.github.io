<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        
        表单 | 
        联通通用样式库
    </title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta charset="utf-8">
    
        <link rel="stylesheet" href="/css/page.css">
    
    
    <link rel="stylesheet" href="/css/woUI.min.css">
    <link rel="shortcut icon" href="/img/bitbug_favicon.ico" type="image/x-icon"/>
    <script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/js/sidebar.min.js"></script>
    <script type="text/javascript" src="/js/woUI.min.js"></script>
    <script type="text/javascript" src="/js/clipboard.min.js"></script>
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

    
        
        <div class="ui sidebar inverted vertical menu"><a class="item-title">菜单</a><a class="item" href="/docs/install.html">指南</a><a class="item" href="/norm/norm.html">规范</a><a class="item" href="/components/setup.html">组件</a><a class="item" href="/resources/pinpai.html">资源</a><br><a class="item-title">子菜单</a><a class="item" href="setup.html">安装</a><a class="item" href="getting-started.html">快速上手</a><a class="item" href="component.html">更新日志</a><a class="item" href="button.html">按钮</a><a class="item" href="breadcrumb.html">面包屑</a><a class="item" href="avatar.html">图片</a><a class="item" href="tooltip.html">提示框</a><a class="item" href="menu.html">菜单</a><a class="item" href="message.html">消息框</a><a class="item" href="checkbox.html">多选框</a><a class="item" href="tabs.html">标签页</a><a class="item" href="pagination.html">分页</a><a class="item" href="datepicker.html">日期选择器</a><a class="item" href="modal.html">对话框</a><a class="item" href="step.html">步骤条</a><a class="item" href="form.html">表单</a><a class="item" href="icon.html">图标</a><a class="item" href="input.html">输入框</a><a class="item" href="table.html">表格</a></div>
    

<div class="main">
    <div class="headerWrapper">
	<div class="header header-home">
		<div class="container">
			<h1 class="logo">
				<a href="/">
					
						<img src="/img/woui-logo-white@2x.png">
					
				</a>
			</h1>
			<ul class="nav">
				
				<li class="nav-item"><a href="/docs/install.html">指南</a></li><li class="nav-item"><a href="/norm/norm.html">规范</a></li><li class="nav-item"><a href="/components/setup.html">组件</a></li><li class="nav-item"><a href="/resources/pinpai.html">资源</a></li>
				<li class="nav-item mobile" id="mobile-icon">
					<a>
						
							<img src="/img/sidebar-white.png">
						
					</a>
				</li>
			</ul>
		</div>
	</div>
</div>
<div class="contentWrapper">
	<div class="container">
		<div class="content-inner">
			<article class="article-container">
				<div class="article-inner">
					<div class="article">
						<style>
    .woui-form-message {
        display: inline;
        color: #c00;
    }
</style>

<h1 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h1><p>目前提供表单的验证功能。</p>
<h2 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h2><h3 id="实时验证"><a href="#实时验证" class="headerlink" title="实时验证"></a>实时验证</h3><form id="J_Form1"> <div data-form-item=""> <div class="woui-input-wrapper" style="width: 300px;"> <div class="woui-input-group"> <div class="woui-input-group-prepend">用户名:</div> <input type="text" placeholder="请输入内容" class="woui-input woui-input-append" name="user"> </div> </div> <div data-message=""></div> </div> </form>

<script type="text/javascript">var form1 = new woUI.Form('#J_Form1')
form1.addRule({
  name: 'user',
  isRequired: true,
  minLength: 3,
  maxLength: 10,
  rep: /^[a-z]+$/,
  fn: function (v) {
    return v !== 'admin'
  },
  message: {
    isRequired: '用户名必填',
    minLength: '用户名最少输入3位',
    maxLength: '用户名最多输入10位',
    rep: '用户名仅支持小写字母',
    fn: '用户名不能为admin'
  }
})</script>
<div class="demo"><button class="demo-button"><i class="woui-icon icon-arrow-down"></i><span>显示代码</span></button><div class="demo-content"><i class="woui-icon icon-delete copy-button"></i><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.woui-form-message</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#c00</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"J_Form1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-form-item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-wrapper"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-group"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-group-prepend"</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span> <span class="attr">class</span>=<span class="string">"woui-input woui-input-append"</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-message</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> form1 = <span class="keyword">new</span> woUI.Form(<span class="string">'#J_Form1'</span>)</div><div class="line">form1.addRule(&#123;</div><div class="line">    name: <span class="string">'user'</span>,</div><div class="line">    isRequired: <span class="literal">true</span>,</div><div class="line">    minLength: <span class="number">3</span>,</div><div class="line">    maxLength: <span class="number">10</span>,</div><div class="line">    rep: <span class="regexp">/^[a-z]+$/</span>,</div><div class="line">    fn: <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> v !== <span class="string">'admin'</span></div><div class="line">    &#125;,</div><div class="line">    message: &#123;</div><div class="line">        isRequired: <span class="string">'用户名必填'</span>,</div><div class="line">        minLength: <span class="string">'用户名最少输入3位'</span>,</div><div class="line">        maxLength: <span class="string">'用户名最多输入10位'</span>,</div><div class="line">        rep: <span class="string">'用户名仅支持小写字母'</span>,</div><div class="line">        fn: <span class="string">'用户名不能为admin'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</div></div>
<h3 id="验证获取回调事件"><a href="#验证获取回调事件" class="headerlink" title="验证获取回调事件"></a>验证获取回调事件</h3><form id="J_Form2"> <div data-form-item=""> <div class="woui-input-wrapper" style="width: 300px;"> <div class="woui-input-group"> <div class="woui-input-group-prepend">用户名:</div> <input type="text" placeholder="请输入内容" class="woui-input woui-input-append" name="user"> </div> </div> <div data-message=""></div> </div> </form>

<script type="text/javascript">var form2 = new woUI.Form('#J_Form2')
form2.addRule({
  name: 'user',
  isRequired: true,
  minLength: 3,
  maxLength: 10,
  rep: /^[a-z]+$/,
  fn: function (v) {
    return v !== 'admin'
  },
  message: {
    isRequired: '用户名必填',
    minLength: '用户名最少输入3位',
    maxLength: '用户名最多输入10位',
    rep: '用户名仅支持小写字母',
    fn: '用户名不能为admin'
  }
})

form2.onLazy('user', function (va, comp) {
  console.log('失去焦点监听：', va, comp)
  window.alert('输入框失去焦点。\n可以开启控制台查阅信息')
})</script>
<div class="demo"><button class="demo-button"><i class="woui-icon icon-arrow-down"></i><span>显示代码</span></button><div class="demo-content"><i class="woui-icon icon-delete copy-button"></i><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.woui-form-message</span> &#123;</div><div class="line">    <span class="attribute">display</span>: inline;</div><div class="line">    <span class="attribute">color</span>: <span class="number">#c00</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"J_Form2"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-form-item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-wrapper"</span> <span class="attr">style</span>=<span class="string">"width: 300px;"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-group"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"woui-input-group-prepend"</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入内容"</span> <span class="attr">class</span>=<span class="string">"woui-input woui-input-append"</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-message</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> form2 = <span class="keyword">new</span> woUI.Form(<span class="string">'#J_Form2'</span>)</div><div class="line">form2.addRule(&#123;</div><div class="line">    name: <span class="string">'user'</span>,</div><div class="line">    isRequired: <span class="literal">true</span>,</div><div class="line">    minLength: <span class="number">3</span>,</div><div class="line">    maxLength: <span class="number">10</span>,</div><div class="line">    rep: <span class="regexp">/^[a-z]+$/</span>,</div><div class="line">    fn: <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> v !== <span class="string">'admin'</span></div><div class="line">    &#125;,</div><div class="line">    message: &#123;</div><div class="line">        isRequired: <span class="string">'用户名必填'</span>,</div><div class="line">        minLength: <span class="string">'用户名最少输入3位'</span>,</div><div class="line">        maxLength: <span class="string">'用户名最多输入10位'</span>,</div><div class="line">        rep: <span class="string">'用户名仅支持小写字母'</span>,</div><div class="line">        fn: <span class="string">'用户名不能为admin'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">form2.onLazy(<span class="string">'user'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">va, comp</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'失去焦点监听：'</span>, va, comp)</div><div class="line">    <span class="built_in">window</span>.alert(<span class="string">'输入框失去焦点。\n可以开启控制台查阅信息'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</div></div>
<h2 id="html-支持属性"><a href="#html-支持属性" class="headerlink" title="html 支持属性"></a>html 支持属性</h2><table>
<thead>
<tr>
<th>属性</th>
<th>是否必须</th>
<th>可选值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data-form-item</code></td>
<td>yes</td>
<td>空</td>
<td>表单每个控件的位置标志，有此标志的控件才会被验证。验证失败后，此元素会增加样式类 <code>woui-common-error</code></td>
</tr>
<tr>
<td><code>data-message</code></td>
<td>yes</td>
<td>空</td>
<td>表单验证失败提示内容字段，此属性必须嵌套在 <code>data-form-item</code> 内</td>
</tr>
</tbody>
</table>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><blockquote>
<p>new woUI.Form(queryString)</p>
</blockquote>
<p><code>queryString</code>: 可以传入 <code>Element.queryString</code> 支持字符串，也可以直接传入元素对象</p>
<h3 id="添加验证规则"><a href="#添加验证规则" class="headerlink" title="添加验证规则"></a>添加验证规则</h3><blockquote>
<p>woUI.prototype.addRule(rule)</p>
</blockquote>
<p><code>rule</code> 规则结构如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    name: <span class="string">'user'</span>,              <span class="comment">// 绑定对应的控件元素 name 值</span></div><div class="line">    isRequired: <span class="literal">true</span>,          <span class="comment">// 是否必填</span></div><div class="line">    length: <span class="number">5</span>,                 <span class="comment">// 长度多少控制</span></div><div class="line">    minLength: <span class="number">3</span>,              <span class="comment">// 最小长度</span></div><div class="line">    maxLength: <span class="number">10</span>,             <span class="comment">// 最大长度</span></div><div class="line">    rep: <span class="regexp">/^[a-z]+$/</span>,           <span class="comment">// 正则验证</span></div><div class="line">    fn: <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;         <span class="comment">// 自定义函数验证</span></div><div class="line">      <span class="keyword">return</span> v !== <span class="string">'admin'</span></div><div class="line">    &#125;,</div><div class="line">    message: &#123;                 <span class="comment">// 未通过相应验证返回的信息，字段名同上</span></div><div class="line">      isRequired: <span class="string">'用户名必填'</span>,</div><div class="line">      length: <span class="string">'用户名长度必须是5位'</span>,</div><div class="line">      minLength: <span class="string">'用户名最少输入3位'</span>,</div><div class="line">      maxLength: <span class="string">'用户名最多输入10位'</span>,</div><div class="line">      rep: <span class="string">'用户名仅支持小写字母'</span>,</div><div class="line">      fn: <span class="string">'用户名不能为admin'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需要特殊说明的是：</p>
<p>如果控制了 <code>length</code>，那么 <code>minLength</code> <code>maxLength</code> 将不生效；</p>
<p>自定义函数验证，必须返回 Boolean 类型值，否则会将返回值强制转为 Boolean 类型。返回 <code>true</code> 表示验证通过；</p>
<p>验证顺序为：必填、长度、正则、自定义函数。</p>
<h3 id="添加实时监听-失去焦点监听"><a href="#添加实时监听-失去焦点监听" class="headerlink" title="添加实时监听/失去焦点监听"></a>添加实时监听/失去焦点监听</h3><blockquote>
<p>woUI.prototype.on(validator, component)<br>woUI.prototype.onLazy(validator, component)</p>
</blockquote>
<p><code>validator</code>: 验证结果，返回验证规则的相应验证结果，字段如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    $modify: <span class="literal">true</span>,    <span class="comment">// 当前元素是否被用户修改过</span></div><div class="line">    $valid: <span class="literal">true</span>,     <span class="comment">// 所有验证结果是否通过</span></div><div class="line">    name: <span class="string">"user"</span>,     <span class="comment">// 当前元素的 name 值</span></div><div class="line">    isRequired: <span class="literal">true</span>,</div><div class="line">    length: <span class="literal">true</span>,</div><div class="line">    maxLength: <span class="literal">true</span>,</div><div class="line">    minLength: <span class="literal">true</span>,</div><div class="line">    rep: <span class="literal">true</span>,</div><div class="line">    fn: <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>component</code>: 当前验证组件的实例化对象，一般仅在二次开发中直接操作组件时使用。</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>目前表单仅仅支持 <code>input</code> 标签输入类型控件（<code>text</code> <code>password</code> <code>number</code> <code>tel</code> 等）的验证，不支持单选框、多选框、选择框等控件验证。</p>
<p>针对 <code>data-form-item</code> 增加错误样式类和自动展示提示语，此功能是实时的。如不希望使用实时功能，可以不提供对应的样式类以及规则配置中的 <code>message</code>，即不在进行处理。如需要进行展示验证，则需要监听事件手动进行操作。</p>

					</div>
					
						<div class="article-toc">
							<div class="article-toc-inner">
								<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#表单"><span class="toc-text">表单</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#代码演示"><span class="toc-text">代码演示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#实时验证"><span class="toc-text">实时验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#验证获取回调事件"><span class="toc-text">验证获取回调事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#html-支持属性"><span class="toc-text">html 支持属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API"><span class="toc-text">API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化"><span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加验证规则"><span class="toc-text">添加验证规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加实时监听-失去焦点监听"><span class="toc-text">添加实时监听/失去焦点监听</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#说明"><span class="toc-text">说明</span></a></li></ol></li></ol>
							</div>
						</div>
					
				</div>
			</article>
			<aside class="sidebar">
				<div class="inner">
					
					<a class="sidebar-title sidebar-title-link" href="setup.html">安装</a><a class="sidebar-title sidebar-title-link" href="getting-started.html">快速上手</a><a class="sidebar-title sidebar-title-link" href="component.html">更新日志</a><strong class="sidebar-title">基础组件</strong><a class="sidebar-link"" href="button.html">按钮</a><a class="sidebar-link"" href="breadcrumb.html">面包屑</a><a class="sidebar-link"" href="avatar.html">图片</a><a class="sidebar-link"" href="tooltip.html">提示框</a><a class="sidebar-link"" href="menu.html">菜单</a><a class="sidebar-link"" href="message.html">消息框</a><a class="sidebar-link"" href="checkbox.html">多选框</a><a class="sidebar-link"" href="tabs.html">标签页</a><a class="sidebar-link"" href="pagination.html">分页</a><a class="sidebar-link"" href="datepicker.html">日期选择器</a><a class="sidebar-link"" href="modal.html">对话框</a><a class="sidebar-link"" href="step.html">步骤条</a><a class="sidebar-link current"" href="form.html">表单</a><a class="sidebar-link"" href="icon.html">图标</a><a class="sidebar-link"" href="input.html">输入框</a><a class="sidebar-link"" href="table.html">表格</a>
				</div>
			</aside>
		</div>
	</div>
</div>
<div class="footerWrapper">
	<div class="container">
		<div class="footer-main">
			<p class="footer-main-title">
				WoUI 1.0 Alpha Version
			</p>
			<p class="footer-main-desc">Powered By 联通支付用户体验设计中心</p>
		</div>
		<div class="footer-social">
			<a href="http://192.168.7.53:3000/woUI/woUI">
				<img src="/img/github@2x.png">
			</a>
		</div>
	</div>
</div>
<script>
	//定义文章根元素
	var content = document.querySelector('.article')
	//查询所有h2标题
	// var h2 = content.querySelectorAll('h2');
	// for(var i = 0, length = h2.length; i < length; i++) {
	// 	var a = h2[i].querySelector('a');
	// 	var outWrap = document.createElement('a');
	// 	outWrap.id = '#' + h2[i].id;
	// 	content.insertBefore(outWrap,h2[i]);
	// 	outWrap.appendChild(h2[i]);

	// 	var link = document.createElement('a');
	// 	link.innerHTML = '#';
	// 	link.href = '#' + h2[i].id;
	// 	link.className = 'header-link';
	// 	h2[i].appendChild(link);
	// }	

	//查询所有h3标题
	// var h3 = content.querySelectorAll('h3');
	// for(var i = 0, length = h3.length; i < length; i++) {
	// 	var a = h3[i].querySelector('a');
	// 	var outWrap = document.createElement('a');
	// 	outWrap.id = '#' + h3[i].id;
	// 	outWrap.style.position = 'relative';
	// 	content.insertBefore(outWrap, h3[i]);
	// 	outWrap.appendChild(h3[i]);

	// 	var link = document.createElement('a');
	// 	link.innerHTML = '#';
	// 	link.href = '#' + h3[i].id;
	// 	link.className = 'header-link';
	// 	h3[i].appendChild(link);
	// }

	//toc置顶
	var toc = document.querySelector('.article-toc');
	var header = document.querySelector('.headerWrapper');
	var headerHeight = header.clientHeight;

	window.addEventListener('scroll', function() {

		var scrollTop = document.scrollingElement.scrollTop;

		if(scrollTop > headerHeight) {
			toc.className = 'article-toc fixed';
		}else {
			toc.className = 'article-toc';
		}
	});

	//代码块提取
	var demos = document.querySelectorAll('.demo');
	for(var i = 0, length = demos.length; i < length; i++) {

		var button = demos[i].querySelector('button');
			
		var click = demoClick(demos[i]);
		button.addEventListener('click', click);
	}

	function demoClick (el) {
		return function () {
			var button = el.querySelector('button');
			var text = button.querySelector('span');
			var icon = button.querySelector('.woui-icon');
			if(el.classList.contains('active')) {
				el.classList.remove('active');
				icon.classList.remove('active');
				text.innerHTML = '显示代码';
			}else {
				el.classList.add('active');
				icon.classList.add('active');
				text.innerHTML = '隐藏代码';
			}
		}
	}

	window.addEventListener('scroll', updateSidebar);

	function updateSidebar() {
		var doc = document.documentElement;
		var article =document.querySelector('.article');
		var allHeaders = article.querySelectorAll('h1, h2, h3');
		var top = doc && doc.scrollTop || document.body.scrollTop;
		var last;
		var index;

		for (var i = 0; i < allHeaders.length; i++) {
			var link = allHeaders[i];
			if(link.offsetTop > top + 80) {
				last = link;
				index = i;
				break;
			}
		}

		if(last) {
			setActive(last, index);
		}
	}

	function setActive(el, index) {
		var previousActive = document.querySelector('.toc-link.active');
		var subTitles = document.querySelectorAll('.toc-text');

		if(previousActive) {
			previousActive.classList.remove('active');
		}

		if(typeof index == 'number') {
			subTitles[index].parentNode.classList.add('active');
		}
	}

	//复制功能
	var copys = document.querySelectorAll('.copy-button');
	for(var i = 0; i < copys.length; i++) {
		console.log(copys[i]);
		var click = copyAction(copys[i]);
		copys[i].addEventListener('click', click);
	}

	var msg = new woUI.Message();

	function copyAction (el) {
		return function () {
			console.log(el.parentNode)
			var clipboard = new Clipboard(el.parentNode, {
				target: function() {
					return el.parentNode
				},
				isSupported: function() {
					return el.parentNode
				}
			})

			clipboard.on('success', function (e) {
				e.clearSelection();
				 msg.show({
			    message: '复制成功',
			    type: 'success',
			    duration: 3
			  })
			})
		}
	}
</script>










</div>
</body>
<script type="text/javascript">
  console.log('敢偷看我代码!! 发现问题你知道找谁吗？ 你需要联系王昊,你知道吗？ 以后没有我的允许, 不许看我代码!!!!');

  var mobileIcon = document.getElementById('mobile-icon');
  mobileIcon.addEventListener('click', function () {
    $('.ui.sidebar').sidebar('toggle');
  });
</script>
</html>